#ATR Channels Chart Indicator
#Author: TradeArcher2020
#Version: 0.2
#Date Created: 11/15/2020

#Show lines at + and - 1, 2, and 3 ATR above and below the close price of the previous candle to act as guides for stoploss risk or scalp exit points.  

#Added Cloud Channels

input ATRPeriod = 14;
input offset = 1; #hint: which candle to start calculating ATR from (default is 1 for prevous candle)
input showLowerAtr1Cloud = yes;
input showLowerAtr2Cloud = yes;
input showUpperAtr1Cloud = yes;
input showUpperAtr2Cloud = yes;

def lastClose = close[offset];

def atrValue = ATR(length = ATRPeriod)[offset];

plot atrLow1 = lastClose - atrValue;
#atrLow1.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
atrLow1.SetDefaultColor(Color.LIGHT_RED);
#atrLow1.SetStyle(Curve.SHORT_DASH);
plot atrLow2 = lastClose - atrValue * 2;
#atrLow2.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
atrLow2.SetDefaultColor(Color.RED);
#atrLow2.SetStyle(Curve.SHORT_DASH);
plot atrLow3 = lastClose - atrValue * 3;
#atrLow3.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
atrLow3.SetDefaultColor(Color.DARK_RED);
#atrLow3.SetStyle(Curve.SHORT_DASH);

plot atrHigh1 = lastClose + atrValue;
#atrHigh1.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
atrHigh1.SetDefaultColor(Color.LIGHT_GREEN);
#atrHigh1.SetStyle(Curve.SHORT_DASH);
plot atrHigh2 = lastClose + atrValue * 2;
#atrHigh2.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
atrHigh2.SetDefaultColor(Color.GREEN);
#atrHigh2.SetStyle(Curve.SHORT_DASH);
plot atrHigh3 = lastClose + atrValue * 3;
#atrHigh3.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
atrHigh3.SetDefaultColor(Color.DARK_GREEN);
#atrHigh3.SetStyle(Curve.SHORT_DASH);

AddCloud(if showLowerAtr1Cloud then atrLow1 else Double.NaN,  atrLow2, showborder = yes, color1 = Color.LIGHT_ORANGE, color2 = Color.LIGHT_ORANGE);
AddCloud(if showLowerAtr2Cloud then atrLow2 else Double.NaN,  atrLow3, showborder = yes, color1 = Color.LIGHT_RED, color2 = Color.LIGHT_RED);

AddCloud(if showUpperAtr1Cloud then atrHigh1 else Double.NaN,  atrHigh2, showborder = yes, color1 = Color.LIGHT_GREEN, color2 = Color.GREEN);
AddCloud(if showUpperAtr2Cloud then atrHigh2 else Double.NaN,  atrHigh3, showborder = yes, color1 = Color.LIME, color2 = Color.LIGHT_GREEN);